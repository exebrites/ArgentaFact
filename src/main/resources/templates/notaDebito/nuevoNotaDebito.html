<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{layout/base}">

<head>
    <title>Crear Nota de Débito</title>
</head>

<body>

    <section layout:fragment="content">

        <h1>Crear Nota de Débito</h1>

        <div class="mb-3">
            <a th:href="@{/notaDebito/}" class="btn btn-af-secondary btn-sm">
                <i class="bi bi-arrow-left"></i> Volver
            </a>
        </div>

        <div class="card">
            <div class="card-body">

                <form th:action="@{/notaDebito/}" method="post" th:object="${notaDebito}">

                    <!-- Fecha de emisión -->
                    <div class="mb-3">
                        <label for="fechaEmision">Fecha de emisión</label>
                        <input type="date" class="form-control" id="fechaEmision" name="fechaEmision" th:field="*{fechaEmision}" required>
                    </div>
                    <!-- Factura -->
                    <div class="mb-3">
                        <label class="form-label">Factura</label>
                        <select class="js-example-basic-single form-control" id="listaFacturas" name="idFactura"
                            th:field="*{factura}" required>
                            <option value="">Seleccione una factura</option>
                            <option th:each="factura : ${listaFacturas}" th:value="${factura.idFactura}"
                                th:text="${factura.numeroFactura + ' - $' + factura.total + ' - ' + factura.cliente.nombre + ' ' + factura.cliente.apellido}">
                            </option>
                        </select>
                    </div>

                    <!-- Monto -->
                    <div class="mb-3">
                        <label class="form-label">Monto</label>
                        <input type="number" step="0.01" class="form-control" id="monto" name="monto"
                            th:field="*{monto}" required>
                    </div>

                    <!-- Motivo -->
                    <div class="mb-3">
                        <label for="motivo">Motivo</label>
                        <input type="text" class="form-control" id="motivo" name="motivo" th:field="*{motivo}"
                            placeholder="Ingrese el motivo" required>
                    </div>

                    <button type="submit" class="btn btn-success mt-3">Crear</button>
                    <a th:href="@{/notaDebito/}" class="btn btn-secondary mt-3">Cancelar</a>

                </form>

            </div>
        </div>

        <!-- Select2 -->
        <link th:href="@{/css/select2.min.css}" rel="stylesheet" />
        <script th:src="@{/js/jquery.min.js}"></script>
        <script th:src="@{/js/select2.min.js}"></script>
        <script>
            $(document).ready(function () {
                $('.js-example-basic-single').select2({
                    placeholder: "Buscar factura por número, monto o cliente",
                    width: '100%'
                });
            });
        </script>

    </section>

</body>

</html>